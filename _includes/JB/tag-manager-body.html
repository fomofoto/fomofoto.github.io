
{% if site.google.tagmanager_id %}
<!-- Google Tag Manager -->
<amp-analytics config="https://www.googletagmanager.com/amp.json?id={{ site.google.tagmanager_id }}&gtm.url=SOURCE_URL" data-credentials="include"></amp-analytics>
<!-- End Google Tag Manager -->
{% endif %}
{% if site.google.tracking_id %}
<amp-analytics type="googleanalytics">
        <script type="application/json">
        {
          "vars": {
            "account": "{{ site.google.tracking_id }}"
          },
          "triggers": {
            "trackPageview": {
              "on": "visible",
              "request": "pageview"
            }
          }
        }
        </script>
</amp-analytics>
{% endif %}

{% if site.google.optimize_id %}
<amp-analytics id='analytics1' type='googleanalytics'>
    <script type='application/json'>
        {
          "vars": {
            "account": "{{ site.google.optimize_id }}"
          },
          "requests": {
             "experiment": "${pageview}&xid=${xid}&xvar=${xvar}"
          },
          "triggers": {
            "trackPageview": {
              "on": "visible",
              "request": "experiment",
               "vars": {
                 "xid": "{{ site.google.optimize_experiment_id }}",
                 "xvar": "VARIANT(experimentName)"
               }
            }
          }
        }
    </script>
</amp-analytics>
{% endif %}

{% if site.facebook.pixel %}
<!-- Facebook Pixel Analytics tracking -->
<amp-analytics type="facebookpixel" id="facebook-pixel">
    <script type="application/json">
        {
            "vars": {
                "pixelId": "{{site.facebook.pixel}}"
            },
            "triggers": {
                "trackPageview": {
                    "on": "visible",
                    "request": "pageview"
                }
            }
        }
    </script>
</amp-analytics>
    <!-- End Facebook Pixel Analytics example -->
{% endif %}    